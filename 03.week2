# [Relay16-2ì£¼ì°¨] ì‘ë‹µí•˜ë¼! ê·¸ ë•Œ ìš°ë¦¬!! ê¸°íš ì •ë¦¬

## 1. í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—… ë‚´ìš© ì •ë¦¬ ğŸ˜€

### (0) ë‹´ë‹¹ íŒ€ì›

- J032 ê¹€ë™í˜„
- J106 ì‹ ì§€ì—°
- J181 ì „ìš°ë¯¼
- J220 í™©ì„ì˜

### (1) ì‚¬ìš© ê¸°ìˆ 

- HTML + CSS
- Vanilla JavaScript

### (2) êµ¬í˜„ ë‚´ìš©

- ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„ (login.html)
- ë©”ì¸ í˜ì´ì§€ êµ¬í˜„(main.html)
- ì±„íŒ… í˜ì´ì§€ êµ¬í˜„(chat.html)
- socket.io-clientë¥¼ í†µí•œ ì†Œì¼“ êµ¬í˜„
- fetchë¥¼ ì´ìš©í•œ ì„œë²„ì™€ì˜ í†µì‹  êµ¬í˜„ (ë¡œê·¸ì¸ ë° ìœ ì € ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°)

### (3) ì¸ìˆ˜ ì¸ê³„

- í˜„ì¬ íšŒì›ê°€ì… ê¸°ëŠ¥ì€ ë”°ë¡œ ì—†ìœ¼ë©°, DBì— ë”ë¯¸ ê³„ì •ì„ ìƒì„±í•´ë†“ê³  ì‹œì‘í•©ë‹ˆë‹¤.
- ì±„íŒ…ì€ í˜„ì¬ 1:1ë¡œë§Œ ê°€ëŠ¥í•˜ë©°, localì—ì„œ ì‘ì—…í•  ì‹œì— ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ í‚¤ì‹œë©´ ë‹¤ë¥¸ USERë¡œ ì±„íŒ…ì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí• ì‹œì— ì†Œì¼“ ì—°ê²°ì´ ëŠê¸°ë©°, ì´ë•Œ ìƒëŒ€ë°©ê³¼ì˜ ì—°ê²°ì´ ëŠì–´ì¡Œë‹¤ëŠ” ë©”ì„¸ì§€ì™€ í•¨ê»˜ mainìœ¼ë¡œ í™”ë©´ì „í™˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. (+ì±„íŒ… ì¢…ë£Œ ë²„íŠ¼ ì¶”ê°€)
- ì±„íŒ… ì‹œ ìƒëŒ€ë°©ì˜ ì´ë¦„ì´ ë‚˜ì˜¤ë©° ìƒëŒ€ë°©ì˜ ëŒ€í™”ëŠ” ì™¼ìª½, ë³¸ì¸ì˜ ëŒ€í™”ëª©ë¡ì€ ì˜¤ë¥¸ìª½ì— ë‚˜ì˜¤ë„ë¡ êµ¬í˜„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
- ì „ì²´ì ì¸ CSS ë³´ì™„ ë¶€íƒë“œë¦½ë‹ˆë‹¤ ğŸ‘

---

## 2. ìì—°ì–´ ì²˜ë¦¬ ì‘ì—… ë‚´ìš© ì •ë¦¬

### (0) ë‹´ë‹¹ íŒ€ì›

- J070 ë¬¸ì°½ì£¼
- J144 ì´ì„±í˜¸

### (1) ì‚¬ìš© ê¸°ìˆ   

- KoNLPy: í•œêµ­ì–´ ìì—°ì–´ ì²˜ë¦¬ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬
- Tensorflow: íŒŒì´ì¬ ì¸ê³µì§€ëŠ¥ ë¼ì´ë¸ŒëŸ¬ë¦¬

### (2) êµ¬í˜„ ë‚´ìš©  

- [KoNLPy](https://konlpy.org/en/latest/) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ëŒ€í™” ë‚´ìš© ì¤‘ í‚¤ì›Œë“œê°€ ë  ìˆ˜ ìˆëŠ” í›„ë³´êµ° ì¶”ì¶œ.
- ì¶”ì¶œëœ í›„ë³´êµ° ì¤‘ ì·¨ë¯¸, ì§ì—…, ì„±ê²© ë“±ì˜ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” í‚¤ì›Œë“œ ë“¤ì„ ì¶”ì¶œ.
- í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ì„œ Tensorflow ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©, ëª¨ë¸ì„ í•™ìŠµì‹œí‚¨ ë’¤ ì €ì¥.
- ì±„íŒ…ë‚´ìš©ì—ì„œ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•  ë•ŒëŠ” ì €ì¥ëœ ëª¨ë¸ì„ ë¶ˆëŸ¬ì™€ ì‘ì—…ì„ ì§„í–‰í•œë‹¤.

### (3) ì‘ë™ ë°©ì‹

- node.js ì—ì„œ phython ëª¨ë“ˆ í˜¸ì¶œ
- ì…ë ¥ í˜•ì‹ : JSON
- ì¶œë ¥ í˜•ì‹ : JSON

### (4) data ë‚´ìš©
- í•™ìŠµì— ì‚¬ìš©ëœ data
- ë°ì´í„° ì „ì²˜ë¦¬ ê³¼ì • data
- `learend model í´ë”` í•™ìŠµëœ ëª¨ë¸

### (5) ì‹¤í–‰ ì˜ˆì‹œ

`JSON ì…ë ¥, ì½˜ì†” ê²°ê³¼, JSON ì¶œë ¥`

```
{
	"name": "ë¬¸ì°½ì£¼",
	"line": [
		"ì»´í“¨í„°ê°€ ê³ ì¥ë‚˜ì„œ ì½”ë”© ëª»í–ˆë‹¤.",
		"ë¨¸ì‹ ëŸ¬ë‹ ì´ê±¸ ì™œí•œë‹¤ê³  í•´ê°€ì§€ê³ ",
		"íŒŒì´ì¬ ì‰½ë‹¤ë©´ì„œìš”",
		"ìƒˆ í‚¤ë³´ë“œê°€ ê°–ê³  ì‹¶ë‹¤",
		"í•˜ë£¨ì¢…ì¼ ì•„ë¬´ê²ƒë„ ì•ˆí–ˆë‹¤",
		"ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ë‹¤",
		"ë‚˜ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤",
		"ê°ì • ë¶„ë¥˜ê°€ ì˜ì•ˆë©ë‹ˆë‹¤",
		"ì–´ì œ ê°•ë‚¨ì—ì„œ ê³±ì°½ë¨¹ì—ˆìŒ"
	]
}
ì˜ˆìƒ job : í”„ë¡œê·¸ë˜ë¨¸
ì˜ˆìƒ hobby : ê²Œì„
ì˜ˆìƒ character : ì •ì„œì 
ì˜ˆìƒ region : ì„œìš¸
ì˜ˆìƒ PN : ì£¼ë¡œ ë¶€ì •ì  ëŒ€í™”, ë¹„ì¤‘ : 85.71%
{
	"name": "ë¬¸ì°½ì£¼",
	"job": "í”„ë¡œê·¸ë˜ë¨¸",
	"hobby": "ê²Œì„",
	"character": "ì •ì„œì ",
	"region": "ì„œìš¸",
	"pn": [
		"ì£¼ë¡œ ë¶€ì •ì  ëŒ€í™”",
		85.71428571428571
	]
}
```

### (6) ì¸ìˆ˜ ì¸ê³„

- ë°±ì—”ë“œ ë¶€ë¶„ê³¼ ì—°ë™ì´ ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ì—°ë™ ì¢€ ë¶€íƒë“œë¦½ë‹ˆë‹¤ ã… ã… 
- ì¹´í…Œê³ ë¦¬ë³„ í‚¤ì›Œë“œê°€ ë§ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ì¹´í…Œê³ ë¦¬ í•­ëª© ì¶”ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤.
- ì¹´í…Œê³ ë¦¬ëŠ” `data` í´ë”ì˜ `categories.txt` íŒŒì¼ì— `ë°”ì´íŠ¸ìŠ¤íŠ¸ë¦¼`ìœ¼ë¡œ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## 3. ë¡œê·¸ì¸-ì„¸ì…˜ ì‘ì—… ë‚´ìš© ì •ë¦¬

### (0) ë‹´ë‹¹ íŒ€ì›

- J105 ì‹ ì¤€ìˆ˜
- J143 ì´ì„í˜„

### (1) ì‚¬ìš© ê¸°ìˆ 

- jsonwebtoken: json ê¸°ë°˜ í† í° ë°œê¸‰ ë¼ì´ë¸ŒëŸ¬ë¦¬
- sequelize: DB í˜¸ì¶œ

### (2) êµ¬í˜„ ë‚´ìš©

- login.htmlì„ í†µí•´ì„œ ì œì¶œëœ POST ë©”ì‹œì§€ë¥¼ ê²€ì¦
  - DBìƒì— ì €ì¥ëœ ìœ ì €ì˜ ID / PW ì™€ ê²€ì¦
  - api í˜¸ì¶œ ê²½ë¡œ: `/api/login/signin` ì— POST ë©”ì‹œì§€
    - POST ë©”ì‹œì§€ body í˜•ì‹: {"user_id": "jk", "user_pwd": "relay16"}
    - ë¦¬í„´ë˜ëŠ” ë©”ì‹œì§€ í˜•ì‹: "ë°œê¸‰ëœí† í°"
- ID / PWê°€ ì¼ì¹˜í•  ê²½ìš° jwt í† í° ë°œê¸‰ (user_idì™€ secret keyë¥¼ ì´ìš©)
  - ë°œê¸‰ëœ í† í°ì€ clientì˜ cookieì— ì €ì¥ë¨
- cookieì— ì €ì¥ëœ í† í°ì„ ì´ìš©í•˜ì—¬ main.html í˜ì´ì§€ì—ì„œ ìœ ì €ì˜ ë‹‰ë„¤ì„ì„ í‘œì‹œ
- í† í°ì„ decoding í•  ê²½ìš° sign ì‹œì— ì‚¬ìš©í•œ user_idë¥¼ ì¶”ì¶œ ê°€ëŠ¥
- user_idë¥¼ ì´ìš©í•˜ì—¬ DBì˜ users tableì— Query í•˜ì—¬ ìœ ì €ì •ë³´ ìˆ˜ë ¹
- api í˜¸ì¶œ ê²½ë¡œ: `/api/login/getUser` ì— GET ë©”ì‹œì§€
  - GET ë©”ì‹œì§€ body í˜•ì‹: ì—†ìŒ (cookieì˜ í† í° ìë™ ì „ì†¡)
  - ë¦¬í„´ë˜ëŠ” ë©”ì‹œì§€ í˜•ì‹: {"nickname": "ê¹€ì •"}

---

## 4. ì±„íŒ…(ë°±ì—”ë“œ) ì‘ì—… ë‚´ìš© ì •ë¦¬

### (0) ë‹´ë‹¹ íŒ€ì›

- J031 ê¹€ë™ì¸
- J069 ë¬¸ì˜ˆì€

### (1) ì‚¬ìš© ê¸°ìˆ , ëª¨ë“ˆ

- socket.io : ì±„íŒ… ì†Œì¼“ ì—°ê²°ì— ì‚¬ìš©
- child_process : nodeì—ì„œ python ìì—°ì–´ì²˜ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ì‚¬ìš©

### (2) êµ¬í˜„ ë‚´ìš©

- `/src/index.js` ì—ì„œ ì±„íŒ…ì„œë²„ ì„¤ì •, 8080í¬íŠ¸ì— ì—°ê²°
- `/front/js/index.js` ì—ì„œ ê°œë³„ ì†Œì¼“ì´ ì ‘ì†, ë©”ì‹œì§€ ì „ì†¡, ì—°ê²° ì¢…ë£Œ ì‹œ ë°œìƒí•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹  ë‚´ìš© êµ¬í˜„
- `/src/routes/chat/index.js` ì— url ì ‘ì† ë¼ìš°íŒ… ê¸°ëŠ¥ êµ¬í˜„
- `/src/modules/socketConnection.js` ì—ì„œ ì„œë²„ì†Œì¼“ì´ ìœ ì €ì†Œì¼“ìœ¼ë¡œë¶€í„° ì ‘ì†, ë©”ì„¸ì§€ìˆ˜ì‹ , ì¢…ë£Œ ì‹ í˜¸ë¥¼ ë°›ì„ ë•Œ í†µì‹  ë‚´ìš© êµ¬í˜„  
  ë˜í•œ ìœ ì € ë³„ ì±„íŒ…ë¡œê·¸ë¥¼ ì €ì¥í•´ë‘ì—ˆë‹¤ê°€ í•´ë‹¹ ìœ ì €ê°€ __ì ‘ì† ì¢…ë£Œ__ ì‹œ ìœ ì €ê°€ ë‚¨ê²¼ë˜ ëª¨ë“  ì±„íŒ…ë¡œê·¸ë¥¼ ìì—°ì–´ì²˜ë¦¬ í•¨ìˆ˜ë¡œ ë³´ë‚´ì£¼ì–´ ìœ ì € ì„±í–¥ ë¶„ì„

### (3) ì¸ìˆ˜ ì¸ê³„

- í˜„ì¬ë¡œì„œëŠ” ì±„íŒ… ë°© í•˜ë‚˜ê°€ ì¡´ì¬í•˜ê³  ê·¸ê³³ì— ì•„ë¬´ë‚˜ ë§‰ ì ‘ì†ì´ ê°€ëŠ¥í•œ í˜•íƒœì´ë¯€ë¡œ ì„œë²„ ë‚´ ì±„íŒ… ë°©ì´ ì—¬ëŸ¬ê°œ ìƒì„±ë  ìˆ˜ ìˆê³  ê° ë°©ë§ˆë‹¤ ë‘ëª…ì”© ì…ì¥í•  ìˆ˜ ìˆê²Œ êµ¬í˜„ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ì¶”í›„ ìœ ì € ë§¤ì¹­ ì‹œìŠ¤í…œì´ êµ¬í˜„ë˜ì–´ ìœ ì € ì†Œì¼“ì—ì„œ ì±„íŒ… ë§¤ì¹­ì„ ìš”ì²­í•˜ë©´ ì„œë²„ì—ì„œ ì•Œë§ì€ ìœ ì €ë¥¼ ë§¤ì¹­ì‹œì¼œ ì—°ê²°ëœ ë‘ ìœ ì €ë§Œ í•œ ì±„íŒ…ë°©ì— ì…ì¥í•  ìˆ˜ ìˆë„ë¡ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

---

## 5. DataBase

### (0) ë‹´ë‹¹ íŒ…ì›

- J180 ì „ì„¸ì›…

### ì‘ì—… ë‚´ìš©

- db type: mysql of NCP
- db model
  - users : [id,nickname,password,character,job,hobby]  
  - userkeywords : [id,userid,keyword]

- db sync by ORM - Sequelize
  - refer : http://52.78.22.201/tutorials/expressjs/expressjs_orm_two/#tocAnchor-1-4
  - !!!!relay16/src/sequelize/models/index.js -- comments part on => node index.js to sync force, this function reset all db, jo sim!!
- db connect config (dotenv)
  - relay_16/src/sequelize/config.js -- using .env file and .gitignore please DM to J180_ì „ì„¸ì›…
- api service - set api url by __dir structure and filename for later extension
  - user : readOne,Create,Update
  - userkeyword : readAll, readOne, Create
- made sample code for help using sequelize in node, please check relay_16/src/sample.js
- to test users table fetch try sending a GET request to /api/user/jk
  - 'jk' can be substituted for any other user id

## 6. NCP ì„œë²„ í˜¸ìŠ¤íŒ… ì •ë¦¬

### (0) ë‹´ë‹¹ íŒ€ì›

- J105 ì‹ ì¤€ìˆ˜

### (1) ì‚¬ìš© ê¸°ìˆ   

- Naver Cloud Platform

### (2) êµ¬í˜„ ë‚´ìš©

- Naver Cloud Platform ì„ ì´ìš©í•˜ì—¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ í˜¸ìŠ¤íŒ…
  - Node.js v12 ì„¤ì¹˜ ë° êµ¬ë™í™˜ê²½ ì„¸íŒ…
  - Github repoì™€ ì—°ë™í•˜ì—¬ í˜¸ìŠ¤íŒ…
  - SSH ì ‘ì†ìœ¼ë¡œ ë¦¬ëˆ…ìŠ¤ ì œì–´
    - ì ‘ê·¼ì£¼ì†Œ / í¬íŠ¸ / ê³„ì •ì˜ ê²½ìš° J105 ì‹ ì¤€ìˆ˜ì—ê²Œ Slack DMìœ¼ë¡œ ë¬¸ì˜
- Naver Cloud Platfom ì„ ì´ìš©í•˜ì—¬ mySQL DBì„œë²„ í˜¸ìŠ¤íŒ…
  - ìœ„ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì™€ ë…ë¦½ì ìœ¼ë¡œ êµ¬ë™
  - ì ‘ê·¼ì£¼ì†Œ / í¬íŠ¸ / ê³„ì •ì˜ ê²½ìš° J105 ì‹ ì¤€ìˆ˜ì—ê²Œ Slack DMìœ¼ë¡œ ë¬¸ì˜
- ì„œë¹„ìŠ¤ í˜¸ìŠ¤íŒ…
  - ì£¼ì†Œ: http://49.50.160.97:8080/
  - Sample ê³„ì •(ID / PW) 
    - ê³„ì • 1: crong / crong
    - ê³„ì • 2: jk / relay16
  - ì˜ˆì‹œí™”ë©´
![ì˜ˆì‹œí™”ë©´](https://i.imgur.com/jKnAq9P.png)
